

本文将分为三个主要部分：
1.  **项目一：开发 AI 行政助理 Pro**
2.  **项目二：开发电商专业客服 RAG**
3.  **PostgreSQL 部署与数据库表创建**

---

### **项目一：开发 AI 行政助理 Pro**

**目标：** 创建一个能处理内部行政事务的AI助手，具备日程管理、邮件处理、内部知识查询等功能。

**核心功能设计：**
1.  **日程管理：** 查询、创建、修改会议预约。
2.  **邮件助手：** 根据指令草拟邮件内容。
3.  **内部知识库问答 (RAG)：** 回答关于公司规章制度、HR政策、办公流程等问题。
4.  **工具调用 (Action)：** 连接外部API，例如连接日历系统（如Google Calendar）来实际创建会议。

**开发步骤文档：**

**第一步：规划与准备**
1.  **知识库准备：**
    *   收集所有相关的公司内部文档，如《员工手册》、《报销流程》、《IT支持指南》等。
    *   将文档转换为文本格式（如.docx, .pdf, .txt），确保内容清晰。
2.  **工具准备 (Action)：**
    *   确定需要连接的第三方服务（如发邮件用的SMTP服务、日程管理用的Calendar API）。
    *   获取这些服务的API密钥和访问权限。

**第二步：在 FastGPT 中配置应用**
1.  **创建应用：** 登录 FastGPT 后台，点击“应用”，然后“新建应用”，命名为“AI行政助理Pro”。
2.  **配置知识库：**
    *   进入“知识库”模块，新建一个知识库，命名为“公司内部知识库”。
    *   将第一步中准备好的文档上传至该知识库。
    *   进入“应用”的配置页面，将“公司内部知识库”关联到本应用。
3.  **配置提示词 (Prompt)：**
    *   在应用的“提示词”部分，输入专业的系统提示词，以限定AI的角色和行为：
    ```text
    你是一名专业的AI行政助理，负责处理公司内部的行政事务。请严格遵守以下规则：
    1.  回答关于公司制度、流程的问题时，必须严格依据<知识库>中的内容，不得编造。
    2.  如果用户询问的知识库中没有明确答案，请回答“根据我掌握的信息，暂时无法处理这个问题，请您咨询人力资源部或行政部门。”
    3.  当用户需要安排会议或起草邮件时，请详细询问具体信息（如会议主题、时间、参会人、邮件目的、收件人等），然后再生成内容。
    4.  你的语气应始终保持专业、友好、乐于助人。
    ```
4.  **配置工具 (Action - 可选但建议)：**
    *   在“外部调用”或“Action”模块中，配置一个用于发送邮件的API。
    *   通常需要提供API的URL、请求方法（POST）、请求头（Headers）和请求体（Body Schema）。
    *   例如，Body Schema 可能包含 `{"to": "", "subject": "", "content": ""}`。
    *   在提示词中告知模型可以调用此工具，例如：“如果用户要求发送邮件，你可以调用‘send_email’工具。”

**第三步：测试与迭代**
1.  在应用页面的聊天窗口中进行多轮测试。
2.  **测试知识库问答：** 询问“年假有多少天？”“请假的流程是什么？”，检查答案是否准确源自知识库。
3.  **测试邮件起草：** 输入“帮我写一封邮件给技术部，申请更换笔记本电脑”，检查AI是否能生成结构清晰、用语得体的邮件草稿。
4.  **测试会议安排：** 输入“下周三下午两点安排一个产品评审会”，检查AI是否会追问会议时长、参会人等信息。
5.  根据测试结果，反复优化提示词和知识库文档。

---

### **项目二：开发电商专业客服 RAG**

**目标：** 创建一个能准确回答商品信息、订单状态、退换货政策等问题的专业客服机器人。

**核心功能设计：**
1.  **商品信息查询：** 回答关于商品规格、价格、库存、功能等问题。
2.  **订单查询：** 解答物流状态、订单修改、支付问题（此功能通常需对接数据库，见第三部分）。
3.  **政策问答：** 解答退换货、保修、促销活动等规则。
4.  **多轮对话与上下文：** 能够理解用户上下文，例如用户先问“我买的手机”，再问“什么时候发货”，机器人应知道“手机”指代的是哪个订单。

**开发步骤文档：**

**第一步：规划与准备**
1.  **知识库准备：**
    *   **商品知识库：** 整理所有商品的详细描述、说明书、FAQ等文档。
    *   **政策知识库：** 整理《售后服务政策》、《隐私政策》、《活动规则》等文档。
2.  **数据库准备 (PostgreSQL)：** 用于查询实时、个性化的用户订单数据（详见第三部分）。

**第二步：在 FastGPT 中配置应用**
1.  **创建应用：** 新建应用，命名为“电商专业客服RAG”。
2.  **配置知识库：**
    *   建议创建两个知识库：“商品知识库”和“政策知识库”。
    *   分别上传对应的文档。
    *   在应用中关联这两个知识库。
3.  **配置提示词 (Prompt)：**
    ```text
    你是一名专业的电商客服助手。请严格遵守以下规则：
    1.  回答关于商品信息、促销活动、公司政策的问题时，必须严格依据<知识库>中的内容。如果知识库中没有，一律回答“抱歉，关于这个问题我没有查到相关信息，请您联系人工客服核实。”
    2.  对于订单查询（如状态、物流）、账户信息等需要用户隐私数据的问题，你无法直接查看。你应回复：“为了保护您的隐私，请您提供订单号后，我为您在系统中查询。” 然后引导用户提供订单号，或直接引导其联系人工客服。
    3.  你的语气应亲切、耐心、专业，始终代表品牌形象。
    ```
4.  **配置变量：** 为了处理订单查询，可以在应用配置中启用“变量”功能，添加一个变量，如 `order_id`。当用户提供订单号时，AI可以将其存入变量，并在后续对话中调用。

**第三步：测试与迭代**
1.  **测试商品问答：** 询问“iPhone 15 的电池容量是多少？”“这款衣服有黑色的吗？”
2.  **测试政策问答：** 询问“商品签收后多久可以无理由退货？”“运费险怎么用？”
3.  **测试订单处理流程：** 模拟用户问“我的订单到哪里了？”，检查AI是否按提示词要求进行回应。
4.  根据测试结果，优化知识库文档和提示词。

---

### **第三部分：PostgreSQL 部署与数据库表创建**

**目的：** 为电商客服系统提供实时订单数据查询能力。

**部署步骤文档：**

**1. 部署 PostgreSQL**
*   **云服务器部署 (推荐)：** 使用阿里云、腾讯云等的云数据库PostgreSQL服务，根据引导创建实例，设置用户名、密码和数据库名（如 `shop_db`）。注意配置安全组，允许FastGPT服务器的IP地址访问。
*   **本地/Docker部署：**
    ```bash
    # 使用Docker快速部署
    docker run --name some-postgres -e POSTGRES_PASSWORD=mysecretpassword -d -p 5432:5432 postgres
    ```

**2. 连接数据库**
使用任意数据库管理工具（如 pgAdmin, DBeaver）或 `psql` 命令行，连接到你的PostgreSQL实例。

**3. 创建数据库表**
执行以下SQL语句，创建模拟电商业务所需的核心表：

```sql
-- 1. 创建订单表
CREATE TABLE orders (
    order_id VARCHAR(50) PRIMARY KEY, -- 订单号
    user_id INT, -- 用户ID
    product_name VARCHAR(255), -- 商品名称（简化示例）
    amount DECIMAL(10, 2), -- 订单金额
    status VARCHAR(50), -- 订单状态 (e.g., 'pending', 'paid', 'shipped', 'delivered')
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP, -- 创建时间
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP -- 更新时间
);

-- 2. 创建物流表
CREATE TABLE logistics (
    logistics_id SERIAL PRIMARY KEY, -- 物流ID
    order_id VARCHAR(50) REFERENCES orders(order_id), -- 外键，关联订单
    shipping_address TEXT, -- 收货地址
    courier_company VARCHAR(100), -- 快递公司
    tracking_number VARCHAR(100), -- 物流单号
    latest_status VARCHAR(255), -- 最新物流状态 (e.g., '已揽收', '运输中', '已签收')
    latest_update_time TIMESTAMP -- 状态更新时间
);

-- 3. 插入模拟数据
INSERT INTO orders (order_id, user_id, product_name, amount, status) VALUES
('ORDER20240001', 1001, 'iPhone 15 Pro', 7999.00, 'shipped'),
('ORDER20240002', 1002, '华为 MateBook X Pro', 8999.00, 'pending');

INSERT INTO logistics (order_id, shipping_address, courier_company, tracking_number, latest_status, latest_update_time) VALUES
('ORDER20240001', '北京市海淀区某某大厦', '顺丰速运', 'SF1234567890', '【北京市】 快件已离开北京中转中心，发往下一站', '2024-08-24 10:30:00');
```

**4. 在 FastGPT 中配置数据库连接 (Action)**
这是最关键的一步，让AI客服能够查询数据库。
1.  在FastGPT的“外部调用”或“Action”模块中，创建一个新的API调用。
2.  **配置方式：** 选择“SQL查询”或“自定义API”。
    *   **如果FastGPT支持直接连接SQL：** 填写你的PostgreSQL数据库连接信息（主机、端口、数据库名、用户名、密码）。
    *   **更安全的方式 (推荐)：** 编写一个简单的中间API（可以用Python Flask/Node.js实现），部署在你的服务器上。这个API接收包含`order_id`的参数，执行SQL查询并返回JSON结果。然后在FastGPT中配置这个API的URL。
3.  **编写查询：** 在Action中编写SQL查询模板或定义API的请求体。
    *   **请求参数：** 定义一个参数，如 `{{order_id}}`，它的值来自用户的输入或对话中的变量。
    *   **响应解析：** 定义如何解析返回的JSON数据（如 `data[0].latest_status`），并将其用于AI的回答中。

**5. 更新客服提示词**
更新电商客服的提示词，加入关于数据库查询的说明：
```text
...（保持原有规则不变）...
4.  当用户提供有效的订单号后，你可以调用‘query_order_status’工具来查询该订单的详细状态和物流信息，并将结果整合后告知用户。
```

通过以上步骤，你就可以系统地完成两个AI应用的设计、开发、测试和部署，并建立起一个支持实时数据查询的数据库后端。
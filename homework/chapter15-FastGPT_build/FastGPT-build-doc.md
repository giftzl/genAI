

---

# FastGPT 应用开发与私有化部署文档

## 项目概述

本文档旨在记录基于 **FastGPT** 构建两个AI应用的关键步骤：
1.  **应用一：雪茄百科** - 一个专业的雪茄知识问答机器人。
2.  **应用二：AI行政助理** - 一个能高效回答新员工问题的企业内部助手。
3.  **（可选）** 使用 Docker Compose 完成 FastGPT 的私有化部署，并在私有环境中重新构建上述应用。

---

## 第一部分：使用 FastGPT 在线版开发

### 1.1 雪茄百科应用开发

**核心思路**：通过高质量的知识库和精准的提示词，打造一个专业的雪茄领域专家。

**关键步骤**：

1.  **应用创建**：
    *   登录 FastGPT 在线版 (https://fastgpt.in/)。
    *   进入「应用」页面，点击「新建」。
    *   应用名称设置为 `雪茄百科`。
    *   应用类型选择「高级编排」，以便进行更精细的流程控制。

2.  **知识库构建与配置**：
    *   **数据收集**：搜集整理雪茄相关的结构化知识，如：
        *   品牌历史（Montecristo, Cohiba, Romeo y Julieta 等）
        *   型号、环径、长度介绍
        *   风味描述（泥土、木香、咖啡、胡椒等）
        *   产地知识（古巴、多米尼加、尼加拉瓜等）
        *   养护方法（湿度、温度、醇化时间）
        *   品吸礼仪
    *   **数据处理**：将文本资料整理成 `PDF`, `Word`, `TXT` 或 `Markdown` 格式。确保内容清晰，格式规范。
    *   **创建知识库**：在「知识库」页面，新建一个名为 `雪茄知识库` 的知识库。
    *   **上传数据**：将整理好的文件上传至该知识库。FastGPT 会自动进行切片和向量化处理。
    *   **配置应用关联**：在 `雪茄百科` 应用的「知识库」配置选项中，选择 `雪茄知识库` 作为参考知识源。

3.  **提示词优化（系统提示词）**：
    ```text
    你是一名资深的雪茄鉴赏家和文化专家，专注于为用户提供准确、专业、生动的雪茄相关知识。
    # 约束条件
    - 回答必须基于提供的<知识库>内容，严禁编造不存在的信息。
    - 如果<知识库>中没有相关信息，请直接告知用户“关于这个问题，我目前的知识库还没有收录相关信息”。
    - 语言风格应专业、优雅且富有品味，但同时要对新手保持友好和耐心。
    - 在介绍一款雪茄时，应优先提及其品牌、产地、尺寸和核心风味特征。

    # 工作流程
    1.  充分理解用户关于雪茄的任何问题。
    2.  严格在<知识库>中检索最相关的内容。
    3.  对检索到的信息进行整合、总结，并用清晰易懂的方式输出。

    # 开场白
    您好，我是您的雪茄百科专家。请问您想了解关于雪茄品牌、型号、风味、养护，还是文化礼仪方面的知识呢？
    ```

4.  **测试与迭代**：
    *   在应用界面的对话窗口进行测试。
    *   提问：`蒙特克里斯托 No.2 的特点是什么？`、`如何养护古巴雪茄？`
    *   根据回答的准确性和流畅度，持续补充知识库和微调提示词。

### 1.2 AI 行政助理应用开发

**核心思路**：通过精准的问题分类和引导，以及嵌入公司手册内容，让AI成为新员工的第一站求助点。

**关键步骤**：

1.  **应用创建**：
    *   新建一个名为 `AI行政助理` 的应用。
    *   应用类型同样选择「高级编排」。

2.  **知识库构建与配置**：
    *   **数据来源**：将公司的所有规章制度手册数字化。例如：
        *   《员工手册》
        *   《IT设备使用与网络安全规范》
        *   《财务报销流程》
        *   《请假与考勤制度》
        *   《新员工入职指南》
        *   常用办公软件（OA、ERP、CRM）的教程文档
    *   **创建知识库**：新建名为 `公司内部知识库` 的知识库，上传上述所有文件。

3.  **问题分类与提示词优化（核心）**：
    **系统提示词**：
    ```text
    你是一名高效、专业、友善的公司行政助理，专门负责解答新员工在入职初期遇到的各种常见问题。
    # 核心职责
    1.  **精准分类**：首先判断用户问题属于哪个类别（见下文）。
    2.  **高效引导**：根据类别，引导用户提供必要信息或直接给出清晰、步骤化的答案。
    3.  **严格依据**：所有回答必须严格遵循<知识库>（公司制度文件）中的规定，不得臆造。如果制度中未规定，应提示用户咨询HR部门。

    # 问题分类及回答规范
    - **【考勤请假类】**（如：请假、打卡、加班）
        - 回答必须包含：流程、所需审批人、所需系统/表单、截止时间。
        - 范例：“请问您想申请事假还是年假？请告知具体日期，我将为您说明申请流程。”

    - **【财务报销类】**（如：报销、垫付、发票）
        - 回答必须包含：报销标准、发票要求、提交流程、审批周期。
        - 范例：“差旅费报销需要提供酒店和交通的增值税发票。请您在OA系统中提交‘费用报销’申请，并上传发票照片。”

    - **【IT支持类】**（如：账号、密码、软件、网络）
        - 回答必须包含：解决方案或帮助渠道。
        - 范例：“如果您忘记了OA密码，可以访问[链接]进行重置。若问题仍未解决，请联系IT支持热线 x1234。”

    - **【办公设施类】**（如：会议室预订、办公用品申领）
        - 回答必须包含：申请路径和规则。
        - 范例：“您可以登录OA系统，在‘资源预约’模块预订会议室。”

    - **【通用文化类】**（如：着装要求、公司活动）
        - 基于知识库轻松回答。

    # 约束
    - 如果问题不在上述分类或知识库中，请回答：“关于这个问题，建议您直接咨询人力资源部的王经理（分机号：1234），以获得最准确的帮助。”
    - 回答请尽量分点、分步骤，保持清晰。

    # 开场白
    您好！我是您的AI行政助理，很高兴为您服务。请问您在考勤请假、财务报销、IT支持等方面有什么需要帮助的吗？
    ```

4.  **测试与迭代**：
    *   **模拟提问**：
        *   `“我明天想请假，该怎么操作？”` (应触发【考勤请假类】流程)
        *   `“我的电脑连不上打印机了怎么办？”` (应触发【IT支持类】流程，引导至IT部门)
        *   `“出差报销标准是多少？”` (应触发【财务报销类】，直接引用手册数据)
    *   根据测试结果，反复优化提示词中的分类描述和回答规范，确保AI能正确分类并回应。

---

## 第二部分：FastGPT 私有化部署 (Docker Compose)

**优势**：数据完全私有，安全性高，可定制化程度高，可离线运行。

### 关键步骤

1.  **环境准备**：
    *   一台服务器（Linux，推荐 Ubuntu 22.04 LTS）。
    *   安装 `Docker` 和 `Docker Compose`。
    *   确保服务器有足够的CPU、内存和存储空间。

2.  **获取部署文件**：
    ```bash
    # 从 FastGPT 官方 GitHub 仓库克隆最新代码
    git clone https://github.com/labring/FastGPT.git
    cd FastGPT
    ```

3.  **环境配置**：
    *   复制并修改环境变量文件：
      ```bash
      cp .env.template .env
      ```
    *   编辑 `.env` 文件，配置关键参数：
        *   `HTTP_PORT`: 访问端口（如 `3000`）。
        *   `MONGODB_PASSWORD` / `MONGODB_USER` / `MONGODB_DATABASE`: 数据库密码。
        *   `OPENAI_BASE_URL`: 填入你的 AI 模型 API 地址（如 OpenAI 或部署好的本地模型）。
        *   `OPENAI_API_KEY`: 填入对应模型的 API Key。
        *   `DB_MAX_LINK`: 数据库连接数。
        *   `PDF_PASSWORD`: 处理PDF的密码（可选）。

4.  **修改配置文件** (`docker-compose.yml`)：
    *   检查 `docker-compose.yml` 文件，确保 volumes 挂载路径正确。
    *   如果需要修改默认端口映射，可调整文件中的 `ports` 部分（如 `"3000:3000"`）。

5.  **启动服务**：
    ```bash
    # 使用 docker-compose 启动所有服务 (核心组件：MongoDB, API, Web)
    docker-compose up -d
    ```
    *   `-d` 参数表示在后台运行。
    *   首次启动会自动拉取镜像并初始化数据库，需要耐心等待。

6.  **访问与验证**：
    *   在浏览器中访问 `http://你的服务器IP:3000`。
    *   使用默认账号密码（通常在环境文件或文档中设置，如 `root` / `1234`）登录。
    *   登录后，系统界面与在线版基本一致。

7.  **数据迁移与重建**：
    *   **知识库**：需要在私有化部署的 FastGPT 中重新创建知识库并上传公司文件。
    *   **应用配置**：将在线版中调试好的「提示词」和「应用编排」复制到私有化版本的应用中。
    *   **优点**：确保了最敏感的公司数据从未离开过内网环境，安全性最大化。

---
